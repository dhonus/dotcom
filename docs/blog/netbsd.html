<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width" />

		<title>Daniel Honus</title>
		<meta http-equiv="content-security-policy" content="">
		<link href="../_app/immutable/assets/_layout-94d9fbd4.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/start-a2064c4e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index-837ef9ab.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons-1460ccb4.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/_layout.svelte-f346bc7c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores-f65595c3.js">
		<link rel="modulepreload" href="../_app/immutable/modules/pages/_layout.ts-9cbb603b.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_layout-da46b06b.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/blog/netbsd/_page.md-925b8a0a.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/post-c53b2530.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">


<div class="main-wrapper"><div class="topbar"><div class="identity"><a href="/" title="Home"><img src="/images/profile.png" alt="Daniel Honus" width="200" height="200"></a>
      <img class="vegan-burger" src="/images/vegan-burder-menu-svgrepo-com.svg"></div>
    <nav class="navbar" id="navbar"><a href="/"><img src="/images/home-svgrepo-com.svg">Home</a>
      <a href="https://github.com/dhonus" target="_blank"><img src="/images/github-svgrepo-com.svg">Github</a>
      <a href="/portfolio"><img src="/images/lamp-svgrepo-com.svg">Portfolio</a>
      
      <a href="/blog" class="active"><img src="/images/news-svgrepo-com.svg">Blog</a></nav></div>
  <main><article><div class="article-head"><h1>Useful NetBSD commands to get a working installation with DWM</h1>
    <p>Published: December 16, 2022</p></div>
  <a href="/images/blog/thumbnails/bsd.jpg"><div class="thumbnail" style="background: url(/images/blog/thumbnails/bsd.jpg); background-size: cover; background-position: center;"></div></a>

  <h1>Useful NetBSD commands to get working installation with DWM</h1>
<p>I might need this in the future, really don’t want to figure it out again and it’s good website-filler.<br>
Some things are done quite differently to freebsd and thanks to its smaller userbase it can be hard to get good search results. Here I present some notes I have taken over the course of time I have spent using NetBSD. Also just before we start, note my system specs and make changes to the commands accordingly. i5 6600 (4 cores); AMD RX 570; 8G of ram; no wifi card; B150M-D3H motherboard hence its ethernet.
To avoid typing out all these commands, I made a script to automate them. But you can’t have it. It’s mine. All jokes aside, I haven’t tested it and it would probably just break your installation. The contents, however, are more or less what you will find in this guide.</p>
<h2>To fix SSL errors with curl and git</h2>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">$ pkgin <span class="token keyword">in</span> mozilla-rootcerts
$ mozilla-rootcerts <span class="token function">install</span></code><!-- HTML_TAG_END --></pre>
<h2>Good website to get sauce</h2>
<p><a href="https://paedubucher.ch/articles/2020-08-11-freebsd-on-the-desktop.html" rel="nofollow">paedebucher.ch</a></p>
<h2>Get a good mirror</h2>
<p>Or watch your computer download at speeds of the 1980s. Most mirrors are pretty horrid… Anyway, you need to run these nice commands.</p>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell"> $ <span class="token assign-left variable">PKG_PATH</span><span class="token operator">=</span><span class="token string">"https://cdn.NetBSD.org/pub/pkgsrc/packages/NetBSD/<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-p</span><span class="token variable">)</span></span>/<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-d_</span> <span class="token parameter variable">-f1</span><span class="token variable">)</span></span>/All"</span>
 $ <span class="token builtin class-name">export</span> PKG_PATH
 $ pkg_add <span class="token parameter variable">-v</span> pkgin</code><!-- HTML_TAG_END --></pre>
<p>The following commands after having pkgin installed</p>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell"> $ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/pkg/etc/pkgin
 $ <span class="token function">touch</span> /usr/pkg/etc/pkgin/repositories.conf
 $ <span class="token function">vim</span> /usr/pkg/etc/pkgin/repositories.conf</code><!-- HTML_TAG_END --></pre>
<p>The file repositories.conf has the a list of your mirrors. At the end of the file add the following:  </p>
<ul><li><strong>IMPORTANT!</strong> Change the number after …/amd64/ to your version of NetBSD. In my case, I am using 9.1, so I will write in 9.1. Also note that <strong>amd64 = x86_64</strong>. Oh the names.  
* ```http://ftp.netbsd.org/pub/pkgsrc/packages/NetBSD/amd64/9.1/All/```</li>
<li>If you are using a different architecture to amd64, visit the website <a href="http://ftp.netbsd.org/pub/pkgsrc/packages/NetBSD/">http://ftp.netbsd.org/pub/pkgsrc/packages/NetBSD/</a> in your browser and find your actual architecture and use its link that looks like the one above. Then export the same link like this:<ul><li><code>$ export PKG_PATH=”http://ftp.netbsd.org/pub/pkgsrc/packages/NetBSD/amd64/9.1/All/</code></li></ul></li></ul>
<p>You can then install the pkgin package manager and use it from then onwards, your mirrors should work fine now. Remember to change the number when you upgrade to a new version of NetBSD.  </p>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">$ pkg_add <span class="token parameter variable">-v</span> pkgin
$ pkgin update</code><!-- HTML_TAG_END --></pre>
<h2>dwm won’t compile</h2>
<p>This is to be expected, GNU/Linux and BSDs are different systems. Thankfully the suckless devs, <a href="https://news.ycombinator.com/item?id=20845633" rel="nofollow">although apparently Nazis</a>, are really good programmers and only a few things will have to change.</p>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">$ <span class="token builtin class-name">cd</span> dwm
$ <span class="token function">make</span></code><!-- HTML_TAG_END --></pre>
<h4>drw.c:5:10: fatal error: ‘X11/Xlib.h’ file not found</h4>
<p><code>#include &lt;X11/Xlib.h&gt;</code></p>
<p>If you’ve used dwm on freeBSD or openBSD, you may be used to changing the location of the X11R6 header files to <em>local</em> in the <strong>config.mk</strong> file. This file, located inside your dwm folder needs these variables changed, but in a way that is different to open and freebsd.</p>
<p>Install freetype2, you will need it:</p>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">$ pkgin <span class="token keyword">in</span> freetype2</code><!-- HTML_TAG_END --></pre>
<h3>Use this command to find the missing file.</h3>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">$ <span class="token function">find</span> / <span class="token parameter variable">-type</span> f <span class="token parameter variable">-name</span> Xlib.h</code><!-- HTML_TAG_END --></pre>
<h2>NetBSD</h2>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">X11INC <span class="token operator">=</span> /usr/X11R6/include   --<span class="token operator">></span>  X11INC <span class="token operator">=</span> /usr/X11R7/include
X11LIB <span class="token operator">=</span> /usr/X11R6/lib  --<span class="token operator">></span> 	X11LIB <span class="token operator">=</span> /usr/X11R7/lib
<span class="token punctuation">..</span>.
FREETYPEINC <span class="token operator">=</span> /usr/X11R7/include/freetype2</code><!-- HTML_TAG_END --></pre>
<h2>FreeBSD</h2>
<pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">X11INC <span class="token operator">=</span> /usr/X11R6/include   --<span class="token operator">></span>  X11INC <span class="token operator">=</span> /usr/local/include 
X11LIB <span class="token operator">=</span> /usr/X11R6/lib  --<span class="token operator">></span> 	X11LIB <span class="token operator">=</span> /usr/local/lib
<span class="token punctuation">..</span>.
FREETYPEINC <span class="token operator">=</span> /usr/local/include/freetype2</code><!-- HTML_TAG_END --></pre></article></main></div>
<footer><p class="footer-copyright">Copyright © 2018 – 2022 Daniel Honus. <br>This website is free software licensed under the <a href="https://www.gnu.org/licenses/gpl-3.0.html" style="color:gray;">GNU GPLv3</a>.  Source code available on <a href="https://github.com/dhonus/dotcom" style="color:gray;">Github</a>.
    Verbatim copying and redistribution of this entire page are permitted provided this copyright notice and license are preserved.</p>
  <a target="_blank" href="https://mega.nz/megadrop/BdiWVPiHPpo"><button class="footer-megalink">Send Me a File With MEGA</button></a>
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400;0,700;1,400;1,500;1,700&family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet"></footer>


		<script type="module" data-sveltekit-hydrate="1lv3vu5">
			import { start } from "../_app/immutable/start-a2064c4e.js";

			start({
				env: {},
				paths: {"base":"","assets":""},
				target: document.querySelector('[data-sveltekit-hydrate="1lv3vu5"]').parentNode,
				version: "1671403059700",
				hydrate: {
					node_ids: [0, 6],
					data: [null,null],
					form: null
				}
			});
		</script>
	</div>
	</body>
</html>
